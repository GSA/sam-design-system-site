<sam-page-next>

  <!-- page title goes here -->
  <sam-page-title
    super="Contract Detail Report"
    title="Contract Detail based on Account IDs for FY18"
    inverted="true">
  </sam-page-title>

  <sam-toolbar></sam-toolbar>

  <sam-aside>

    <sam-filters-wrapper [group]="form">
      <h4 class="sam heading">Filter By</h4>
      <sam-filters
        [form]="form"
        [fields]="fields"
        [model]="model"></sam-filters>
    </sam-filters-wrapper>

    <!-- finalize this implementation -->
    <sam-resources-wrapper>
      <h4 class="sam heading">Resources</h4>
      <ul class="sam list">
        <li>
          <a href="https://beta.sam.gov/help/assistance-listing"
            target="_blank" rel="noopener noreferrer">
            About Federal Assistance
          </a>
        </li>
      </ul>
    </sam-resources-wrapper>

  </sam-aside>

  <!-- Main Content -->
  <sam-main>

    <!-- filter-drawer -->
    <sam-filter-drawer>
      <li sam-filter-drawer-item
        *ngFor="let filterItem of filters | async"
        [fieldId]="filterItem.id"
        [fieldLabel]="filterItem.label"
        [fieldValue]="filterItem.value"
      ></li>
    </sam-filter-drawer>
    
    <sam-main-content>
      <sam-tabs-next samContentOutlet>
        <sam-tab-next>
          <div class="title">
            <sam-icon [icon]="faTable"></sam-icon> Summary
          </div>
          <!-- pagination + edit fields button -->
          <sam-action-bar>
            <sam-pagination-next
              [totalUnits]="length"
            ></sam-pagination-next>
            <sam-button-next
              samPageAction
              action="secondary"
              (click)="toggleFieldsEditor()"
            >
            Columns
          </sam-button-next>
          </sam-action-bar>
        
        <!-- datatable -->
        <sam-datatable samSort
          [dataSource]="dataSource"
          class="sam large table"
          (samSortChange)="onSortChange($event)">
          <ng-container
            *ngFor="let col of columnDefObs | async"
            [cdkColumnDef]="col.def">
            <sam-header-cell
              *cdkHeaderCellDef
              sam-sort-header>
              {{ col.headerLabel }}
            </sam-header-cell>

            <sam-cell *cdkCellDef="let row">
              {{ row[col.cellId] }}
            </sam-cell>
          </ng-container>
          
          <sam-header-row
            *cdkHeaderRowDef="displayedColumns"
          ></sam-header-row>
          <sam-row
            *cdkRowDef="let row; columns: displayedColumns"
          ></sam-row> 
        </sam-datatable>
      </sam-tab-next>
      <sam-tab-next>
        <div class="title">
          <sam-icon [icon]="faTable"></sam-icon> Award Details
        </div>
        bbbb
      </sam-tab-next>
      <sam-tab-next tabTitle="Chart">
        <div class="title">
          <sam-icon [icon]="faChartBar"></sam-icon> Chart
        </div>
        cccc
      </sam-tab-next>
      </sam-tabs-next>
    </sam-main-content>
  </sam-main>

</sam-page-next>

<!-- modals -->
<sam-modal
  [showClose]="true"
  [title]="'Edit Fields'"
  [type]="'info'"
  [description]="'Edit fields for report'"
  [submitButtonLabel]="'Done'"
  [cancelButtonLabel]="'Cancel'"
  (close)="cancelModalAction()"
  (submit)="submitModalAction()">
  <div class="sam reset checkboxes labels fieldsets">
    
    <h4 class="sam heading">{{ options.organization.label }} </h4>
    <sam-checkbox
      [(ngModel)]="options.organization.selected"
      [name]="options.organization.label"
      [options]="options.organization.options"
    ></sam-checkbox>
    
    <h4 class="sam heading">{{  options.listing.label }}</h4>
    <sam-checkbox
    [(ngModel)]="options.listing.selected"
    [name]="options.listing.label"
    [options]="options.listing.options"
    ></sam-checkbox>
    
    <h4 class="sam heading">{{ options.status.label }}</h4>
    <sam-checkbox
    [(ngModel)]="options.status.selected"
    [name]="options.status.label"
    [options]="options.status.options"
    ></sam-checkbox>
    
  </div>
</sam-modal>
